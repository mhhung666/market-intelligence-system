# Docker 使用建議

## 🎯 快速決策

### 情境 1: 我有專用伺服器/VPS/雲端主機
→ **用 Docker Cron** (推薦)

```bash
make docker-cron-up
```

**理由:**
- 簡單: 一行指令，設定完就忘記它
- 穩定: 自動重啟，不用擔心
- 資源: ~100MB 記憶體，完全可接受
- 管理: 日誌統一，容易追蹤

### 情境 2: 我用個人電腦/筆電
→ **用宿主機 Cron** (彈性)

```bash
crontab -e
# 0 8 * * * cd /path && make docker-daily >> logs/cron.log 2>&1
```

**理由:**
- 省資源: 平時不佔用任何資源
- 彈性: 關機也不影響
- 日誌: 在宿主機更容易查看

### 情境 3: 我想測試/開發
→ **手動執行**

```bash
make docker-daily
```

**理由:**
- 即時: 想執行就執行
- 除錯: 容易看錯誤訊息
- 開發: 邊改邊測

## 📊 資源佔用實測

### Docker Cron 容器 (持續運行)
```
CPU:    ~0.1%
記憶體:  ~100MB
磁碟:   ~500MB (image)
```

**結論:** 幾乎可以忽略！

### 宿主機 Cron + 按需啟動
```
平時:    0
執行時:  CPU 10-30%, 記憶體 200-500MB (5-10分鐘)
```

**結論:** 執行時才佔資源

## 💡 我的推薦

### 🥇 第一名: Docker Cron
```bash
make docker-cron-up
```

**適合 95% 的使用場景**

為什麼?
- 2024 年了，100MB 記憶體真的不算什麼
- 設定一次永遠不用管
- 穩定可靠
- 完全容器化

### 🥈 第二名: 宿主機 Cron
```bash
crontab -e
```

**適合特殊需求**

什麼時候用?
- 筆電 (經常關機)
- 記憶體很吃緊的環境
- 需要更細緻的控制

### 🥉 第三名: 手動執行
```bash
make docker-daily
```

**開發測試用**

## 🔧 實際操作

### 推薦流程

```bash
# 1. 測試幾次確保正常
make docker-daily
make docker-daily

# 2. 確認沒問題後，啟動自動化
make docker-cron-up

# 3. 檢查日誌確認執行
make docker-cron-logs

# 4. 完成！之後就不用管了
```

## 📝 FAQ

**Q: Docker Cron 會不會吃很多資源?**
A: 不會，只佔 ~100MB 記憶體，CPU 幾乎為 0

**Q: 容器重啟後 cron 會繼續執行嗎?**
A: 會！docker-compose 設定了 `restart: unless-stopped`

**Q: 可以改執行時間嗎?**
A: 可以！編輯 `docker/crontab` 然後重啟容器

**Q: 兩種 cron 方式可以同時用嗎?**
A: 不建議，會重複執行

**Q: 如何知道 cron 有沒有在執行?**
A: `make docker-cron-logs` 查看日誌

## 🎉 結論

**除非你有特殊需求，否則就用 Docker Cron！**

```bash
make docker-cron-up
```

簡單、穩定、省心 ✨
